---
modules:
  - type: dnf
    repos:
      cleanup: true
      nonfree: rpmfusion

    install:
      packages:
        - alacritty
        - emacs
        - libvterm
        - zathura
        - zathura-cb
        - zathura-ps
        - zathura-djvu
        - zathura-pdf-poppler

        - qutebrowser
        - libavcodec-freeworld
        - ffmpeg

  # this + installing ffmpeg is to ensure the libavcodec-freeworld for
  # qutebrowser can be installed. this is based on the commonly suggested
  # workaround for installing libavcodec-freeworld:
  ## rpm-ostree override remove libavdevice-free libavcodec-free libavfilter-free libavformat-free libavutil-free libpostproc-free libswresample-free libswscale-free ffmpeg-free --install ffmpeg
  - type: rpm-ostree
    remove:
      - libavdevice-free
      - libavcodec-free
      - libavfilter-free
      - libavformat-free
      - libavutil-free
      - libpostproc-free
      - libswresample-free
      - libswscale-free
      - ffmpeg-free

  - type: default-flatpaks
    configurations:
      - notify: false
        install:
          - io.gitlab.librewolf-community

  - type: justfiles
    validate: true
    include:
      - syke.just

  - type: signing
